C语⾔是结构化的程序设计语⾔，这⾥的结构指的是顺序结构、选择结构、循环结构，C语⾔是能够实现这三种结构的，其实我们如果仔细分析，我们⽇常所⻅的事情都可以拆分为这三种结构或者这三种结构的组合。我们可以使⽤ if 、 switch 实现分⽀结构，使⽤ for 、 while 、 do while 实现循环结构。

## 一. if 语句

### 01. if

if 语句的语法形式如下：

```c
if (表达式)
  语句
```

表达式成⽴（为真），则语句执行，表达式不成⽴（为假），则语句不执行。

在C语⾔中，0为假，⾮0表⽰真，也就是表达式的结果如果是0，则语句不执⾏，表达式的结果如果不是0，则语句执⾏。

例⼦：输⼊⼀个整数，判断是否为奇数

```c
#include <stdio.h>
int main() {
	int num = 0;
	scanf("%d", &num);
	if (num % 2 == 1)
		printf("%d 是奇数\n", num);
	return 0;
}
```

![image-20240206224043168](assets/image-20240206224043168.png)

### 02. else

如果⼀个数不是奇数，那就是偶数了，如果任意⼀个整数，我们要清楚的判断是奇数还是偶数怎么表⽰呢？这⾥就需要 if...else... 语句了，语法形式如下：

```c
if (表达式)
  语句1
else
  语句2
```

例⼦：输⼊⼀个整数，判断是否为奇数，如果是奇数打印是奇数，否则打印偶数。

```c
#include <stdio.h>
int main() {
  int num = 0;
  scanf("%d", &num);
  if (num % 2 == 1)
    printf("%d 是奇数\n", num);
  else 
    printf("%d 是偶数\n", num);
  return 0;
}
```

练习：输⼊⼀个年龄，>= 18岁就输出：成年，否则就输出：未成年

```c
#include <stdio.h>
int main() {
  int age = 0;
  scanf("%d", &age);
  if(age >= 18)
    printf("成年");
  else
    printf("未成年");
  return 0;
}
```

### 03. 分支中包含多条语句

默认在if和else语句中默认都只控制一条语句，比如：

```c
#include <stdio.h>
int main() {
  int age = 0;
  scanf("%d", &age);
  if (age >= 18) 
    printf("成年了");
  	printf("可以谈恋爱了");
  return 0;
}
```

上⾯的代码，你会发现输⼊的值不管是>=18 还是<18，"可以谈恋爱了" 都会打印在屏幕上。

![image-20240206224808264](assets/image-20240206224808264.png)

这是因为 if 语句只能控制⼀条语句，就是 printf("成年了\n"); ，if语句为真，则打印成年了，if语句为假，则不打印，对于 printf("可以谈恋爱了\n"); 是独⽴存在的，不管if语句的条件的真假，都会被执⾏。那如果我们要if语句同时控制2条语句，怎么办呢？那就要使⽤ {} 将代码括起来，else 后也可以跟上⼤括号。如下：

```c
#include <stdio.h>
int main() {
  int age = 0;
  scanf("%d", &age);
  if(age >= 18) {
    // if后使⽤{}控制多条语句-这个块也叫：程序块，或复合语句
    printf("成年了\n");
    printf("可以谈恋爱了\n");
  }
  return 0;
}

int main() {
  int age = 0;
  scanf("%d", &age);
  if(age >= 18) {
    printf("成年了\n");
    printf("可以谈恋爱了\n");
  }
  else { 
    // else后使⽤{}控制多条语句-这个块也叫：程序块，或复合语句
    printf("未成年\n");
    printf("不可以早恋哦\n");
  }
  return 0;
}
```

### 04. 嵌套if

在 if else 语句中， else 可以与另⼀个 if 语句连⽤，构成多重判断。

⽐如：要求输⼊⼀个整数，判断输⼊的整数是0，还是正数或者负数。请看如下代码：

```c
#include <stdio.h>
int main() {
  int num = 0;
  scanf("%d", &num);
  if(num == 0)
    printf("输⼊的数字是0\n");
  else if(num > 0) //这⾥的if 相当于嵌套在else语句中，形成了嵌套结构
    printf("输⼊的数字是正数\n");
  else
    printf("输⼊的数字是负数\n");
  return 0;
}
```

输⼊⼀个整数，如果是正数，再判断是奇数还是偶数，并输出；如果不是正数则输出：⾮正数。

```c
#include <stdio.h>
int main() {
  int num = 0;
  scanf("%d", &num);
  if (num > 0) {
    if (num%2 == 0)
      printf("偶数\n");
    else
      printf("奇数\n");
  }
  else {
    printf("⾮正数\n");
  }
  return 0;
}
```

以上就是嵌套if语句的语法，有了嵌套if语句，就可以完成更多复杂逻辑的判断。

练习：

```c
输⼊⼀个⼈的年龄
如果年龄<18岁，打印"少年"
如果年龄在18岁⾄44岁打印"⻘年"
如果年龄在45岁⾄59岁打印"中⽼年"
如果年龄在60岁⾄89岁打印"⽼年"
如果90岁及以上打印"⽼寿星"
```

```c
//⽅法1
#include <stdio.h>
int main() {
  int age = 0;
  scanf("%d", &age);
  if(age<18)
    printf("少年\n");
  else if(age<=44)
    printf("⻘年\n");
  else if(age<=59)
    printf("中⽼年\n");
  else if(age<=89)
    printf("⽼年\n");
  else
    printf("⽼寿星\n");
  return 0;
}


// 带上⼤括号更容易看明⽩
#include <stdio.h>
int main() {
  int age = 0;
  scanf("%d", &age);
  if(age<18){
    printf("少年\n");
  } else {
    if(age<=44){
      printf("⻘年\n");
    } else{
      if(age<=59){
        printf("中⽼年\n");
      } else {
        if(age<=89)
          printf("⽼年\n");
        else
          printf("⽼寿星\n");
      }
    }
  }
  return 0;
}
```

### 05. 悬空else问题

如果有多个 if 和 else ，可以记住这样⼀条规则， else 总是跟最接近的 if 匹配。我们⾸先从下⾯代码开始

```c
int main() {
  int a = 0;
  int b = 2;
  if (a == 1)
    if (b == 2)
      printf("hehe");
  else
    printf("haha");
  return 0;
}
```

程序运⾏的结果是啥？很多初学者，上来以判断 a 是 0，不等于 1 ，那就执⾏ else ⼦句，打印 haha，但是当你去运⾏代码，输出的结果是：啥都不输出。

![image-20240206230705889](assets/image-20240206230705889.png)

为什么呢？

这就是悬空 else 的问题，如果有多个 if 和 else ，可以记住这样⼀条规则， else 总是跟最接近的 if 匹配。

上⾯的代码排版，让 else 和第⼀个 if 语句对⻬，让我们以为 else 是和第⼀个if匹配的，当 if语句不成⽴的时候，⾃然想到的就是执⾏ else ⼦句，打印 haha ，但实际上 else 是和第⼆个 if进⾏匹配的，这样后边的 if...else 语句是嵌套在第⼀个 if 语句中的，如果第⼀个 if 语句就不成⽴，嵌套 if 和 else 就没机会执⾏了，最终啥都不打印。

如果代码改成下⾯这样就更加容易理解了

```c
#include <stdio.h>
int main() {
  int a = 0;
  int b = 2;
  if(a == 1)
  {
    if(b == 2)
      printf("hehe\n");
    else
      printf("haha\n");
  }
  return 0;
}
```

或者如果我们希望else确实和第⼀个if匹配，可以这样修改代码：

```c
#include <stdio.h>
int main() {
  int a = 0;
  int b = 2;
  if(a == 1)
  {
    if(b == 2)
      printf("hehe\n");
  }
  else
  {
    printf("haha\n");
  }
  return 0;
}
```

只要带上适当的⼤括号，代码的逻辑就会更加的清晰，所以⼤家以后在写代码的时候要注意括号的使⽤，让代码的可读性更⾼。



## 二. 关系操作符

C 语⾔⽤于⽐较的表达式，称为 “关系表达式”（relational expression），⾥⾯使⽤的运算符就称为“关系运算符”（relational operator），主要有下⾯6个。

```c
> ⼤于运算符
< ⼩于运算符
>= ⼤于等于运算符
<= ⼩于等于运算符
== 相等运算符
!= 不相等运算符
```

下⾯是⼀些例⼦。

```c
a == b;
a != b;
a < b;
a > b;
a <= b;
a >= b;
```

关系表达式通常返回 0 或 1 ，表⽰真假。

C 语⾔中， 0 表⽰假，所有⾮零值表⽰真。⽐如， 20 > 12 返回 1 ， 12 > 20 返回 0 。

关系表达式常⽤于 if 或 while 结构。

```c
if (x == 3) {
  printf("x is 3.\n");
}
```

注意：相等运算符 == 与赋值运算符 = 是两个不⼀样的运算符，不要混淆。有时候，可能会不⼩⼼写出下⾯的代码，它可以运⾏，但很容易出现意料之外的结果。

```c
if (x = 3) ...
```

上⾯⽰例中，原意是 x == 3 ，但是不⼩⼼写成 x = 3 。这个式⼦表⽰对变量 x 赋值 3 ，它的返回值为 3 ，所以 if 判断总是为真。

为了防⽌出现这种错误，有的程序员喜欢将变量写在等号的右边。

```c
if (3 == x) ...
```

这样的话，如果把 `==` 误写成 `=`，编译器就会报错

```c
// 报错
if (3 = x) ...
```

另一个需要避免的错误是：C语言中，多个关系运算符不宜连用。

```c
i < j < k
```

上⾯⽰例中，连续使⽤两个⼩于运算符。这是合法表达式，不会报错，但是通常达不到想要的结果，即不是保证变量 j 的值在 i 和 k 之间。因为关系运算符是从左到右计算，所以实际执⾏的是下⾯的表达式。

```c
(i < j) < k
```

上⾯式⼦中， i < j 返回 0 或 1 ，所以最终是 0 或 1 与变量 k 进⾏⽐较。如果想要判断变量 j的值是否在 i 和 k 之间，应该使⽤下⾯的写法。

```c
i < j && j < k
```

⽐如：我们输⼊⼀个年龄，如果年龄在18岁~36岁之间，我们输出⻘年。如果我们这样写：

```c
#include <stdio.h>
int main() {
  int age = 0;
  scanf("%d", &age);
  if (18<=age<=36) {
    printf("⻘年\n");
  }
  return 0;
}
```

当我们输⼊10的时候，依然输出⻘年，如下图：

![image-20240207222706700](assets/image-20240207222706700.png)

这是因为，我们先拿18和age中存放的10⽐较，表达式18<=10为假， 18<=age 的结果是0，再拿0和36⽐较，0<=36为真，所以打印了 ⻘年 ，所以即使当age是10的时候，也能打印 ⻘年 ，逻辑上是有问题，这个代码应该怎么写呢？

```c
#include <stdio.h>
int main() {
  int age = 0;
  scanf("%d", &age);
  if (age>=18 && age<=36) {
    printf("⻘年\n");
  }
  return 0;
}
```

以上就是关于操作符，我们需要掌握的，剩下的只要按照字⾯意思理解使⽤就⾏，没有特别注意的。



## 三. 条件操作符

条件操作符也叫三⽬操作符，需要接受三个操作数的，形式如下：

```c
exp11 ? exp2 : exp3
```

条件操作符的计算逻辑是：如果 exp1 为真， exp2 计算，计算的结果是整个表达式的结果；如果 exp1 为假， exp3 计算，计算的结果是整个表达式的结果。

练习1：使⽤条件操作符表⽰下⾯代码的逻辑

```c
#include <stdio.h>
int main() {
  int a = 0;
  int b = 0;
  scanf("%d", &a);
  if (a > 5)
    b = 3;
  else
    b = -3;
  printf("%d\n", b);
  return 0;
}

// 改造后：
#include <stdio.h>
int main() {
  int a = 0;
  int b = 0;
  scanf("%d", &a);
  b = a>5 ? 3:-3;
  printf("%d\n", b);
  return 0;
}
```

练习2：使⽤条件表达式实现找两个数中较⼤值。

```c
#include <stdio.h>
int main() {
  int a = 0;
  int b = 0;
  scanf("%d %d", &a, &b);
  int m = a>b ? a : b;
  printf("%d\n", m);
  return 0;
}
```



## 四. 逻辑操作符：&&、||、！

逻辑运算符提供逻辑判断功能，⽤于构建更复杂的表达式，主要有下⾯三个运算符。

- ! ：逻辑取反运算符（改变单个表达式的真假）。
- && ：与运算符，就是并且的意思（两侧的表达式都为真，则为真，否则为假）。
- || ：或运算符，就是或者的意思（两侧⾄少有⼀个表达式为真，则为真，否则为假）。

> 注意：C语音中，非0表示真，0表示假。

### 01. 逻辑取反运算符！

![image-20240207224816253](assets/image-20240207224816253.png)

⽐如，我们有⼀个变量叫 flag，如果flag为假，要做⼀个什么事情，就可以这样写代码：

```c
#include <stdio.h>
int main() {
  int flag = 0;
  if (!flag) {
    printf("do something\n");
  }
  return 0;
}
```

如果 flag 为真， !flag 就是假，如果 flag 为假， !flag 就是真

所以上⾯的代码的意思就是 flag 为假，执⾏if语句中的代码。

### 02. 与运算符 &&

![image-20240207225033268](assets/image-20240207225033268.png)

&& 就是与运算符，也是并且的意思， && 是⼀个双⽬操作符，使⽤的⽅式是 a&&b , && 两边的表达式都是真的时候，整个表达式才为真，只要有⼀个是假，则整个表达式为假。⽐如：如果我们说⽉份是3⽉到5⽉，是春天，那使⽤代码怎么体现呢？

```c
int month = 0;
scanf("%d", &month);
if (month >= 3 && month <= 5) {
 printf("春季\n");
}
```

这⾥表达的意思就是month既要⼤于等于3，⼜要⼩于等于5，必须同时满⾜。

### 03. 或运算符 ||

![image-20240207230150675](assets/image-20240207230150675.png)

||就是或运算符，也就是或者的意思， ||也是⼀个双⽬操作符，使⽤的⽅式是 a || b ， ||两边的表达式只要有⼀个是真，整个表达式就是真，两边的表达式都为假的时候，才为假。

⽐如：我们说⼀年中⽉份是12⽉或者1⽉或者2⽉是冬天，那么我们怎么使⽤代码体现呢？

```c
int month = 0;
scanf("%d", &month);
if (month == 12 || month==1 || month == 2) {
  printf("冬季\n");
}
```

### 04. 练习：闰年的判断

输⼊⼀个年份year，判断year是否是闰年

闰年判断的规则：

1. 被4整除并且不能被100整除的是闰年
2. 被400整除是闰年

```c
#include <stdio.h>
//代码1
int main() {
  int year = 0;
  scanf("%d", &year);
  if(year%4==0 && year%100!=0)
    printf("是闰年\n");
  else if(year%400==0)
    printf("是闰年\n");

  return 0;
}
//代码2
int main() {
  int year = 0;
  scanf("%d", &year);
  if((year%4==0 && year%100!=0) || (year%400==0))
    printf("是闰年\n");
  return 0;
}
```

### 05. 短路

C语⾔逻辑运算符还有⼀个特点，它总是先对左侧的表达式求值，再对右边的表达式求值，这个顺序是保证的。

如果左边的表达式满⾜逻辑运算符的条件，就不再对右边的表达式求值。这种情况称为“短路”。

如前⾯的代码：

```c
if (month >= 3 && month <= 5)
```

表达式中&& 的左操作数是 month >= 3 ，右操作数是 month <= 5 ,当左操作数 month >= 3 的结果是0的时候，即使不判断 month <= 5 ，整个表达式的结果也是0。

所以，对于&&操作符来说，左边操作数的结果是0的时候，右边操作数就不再执⾏。

对于 || 操作符是怎么样呢？我们结合前⾯的代码：

```c
if (month == 12 || month == 1 || month == 2)
```

如果month == 12，则不⽤再判断month是否等于1或者2，整个表达式的结果也是1。

所以， || 操作符的左操作数的结果不为0时，就⽆需执⾏右操作数。

像这种仅仅根据左操作数的结果就能知道整个表达式的结果，不再对右操作数进⾏计算的运算称为短路求值。

练习：阅读代码，计算代码输出的结果

```c
#include <stdio.h>
int main() {
  int i = 0,a = 0,b = 2,c = 3,d = 4;
  i = a++ && ++b && d++;
  //i = a++||++b||d++;
  printf("a=%d\n b=%d\n c=%d\n d=%d\n", a, b, c, d); // 1 2 3 4
  printf("%d", i); // 0
  return 0;
}
```



## 五. switch 语句

除了 if 语句外，C语⾔还提供了 switch 语句来实现分⽀结构。

switch 语句是⼀种特殊形式的 if...else 结构，⽤于判断条件有多个结果的情况。它把多重的 else if 改成更易⽤、可读性更好的形式。

```c
switch (expression) {
  case value1: statement
  case value2: statement
  default: statement
}
```

上⾯代码中，根据表达式 expression 不同的值，执⾏相应的 case 分⽀。如果找不到对应的值，就执⾏ default 分⽀。

> 注意：
>
> - switch 后的 expression 必须是整型表达式
> - case 后的值，必须是整型常量表达式

### 01. if语句和switch语句的对比

练习：输⼊任意⼀个整数值，计算除3之后的余数

如果使⽤if语句完成，如下：

```c
#include <stdio.h>
int main() {
  int n;
  scanf("%d", &n);
  if(n%3 == 0)
    printf("整除，余数为0\n");
  else if(n%3 == 1)
    printf("余数是1\n");
  else
    printf("余数是2\n");
  return 0;
}
```

如果使⽤switch语句改写，就可以是这样的：

```c
#include <stdio.h>
int main() {
  int n;
  scanf("%d", &n);
  switch (n%3) {
    case 0:
      printf("整除，余数为0\n"); 
      break;
    case 1:
      printf("余数是1\n"); 
      break;
    case 2:
      printf("余数是2\n"); 
      break;
  }
  return 0;
}
```

上述的代码中，我们要注意的点有：

1. case 和后边的数字之间必须有空格
2. 每⼀个 case 语句中的代码执⾏完成后，需要加上 break ，才能跳出这个switch语句。

### 02. switch语句中的break

前⾯的代码中，如果我们去掉case语句中的break，会出现什么情况呢？

```c
#include <stdio.h>
int main() {
  int n = 0;
  scanf("%d", &n);
  switch (n%3) {
    case 0:
      printf("整除，余数为0\n"); 
    case 1:
      printf("余数是1\n"); 
    case 2:
  }
  return 0;
}
```

测试⼀组，看⼀下结果：![image-20240207232655568](assets/image-20240207232655568.png)

我们发现，7除以3本来余数是1，但是我们发现程序运⾏的结果多了⼀⾏“余数是2”的打印。

这是为什么呢？

原因是 switch 语句也是分⽀效果的，只有在 switch 语句中使⽤ break 才能在跳出 switch 语句，如果某⼀个 case 语句的后边没有 break 语句，代码会继续往下执⾏，有可能执⾏其他 case语句中的代码，直到遇到 break 语句或者 switch 语句结束。就⽐如上⾯的代码就执⾏了 case 2 中的语句。所以在 switch 语句中 break 语句是⾮常重要的，能实现真正的分⽀效果。当然， break 也不是每个 case 语句都得有，这就得根据实际情况来看了。
