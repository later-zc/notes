# 一. `WXSS`编写程序样式

---

## 1.小程序的样式写法

<img src="C:\Users\23634\AppData\Roaming\Typora\typora-user-images\image-20220820171438802.png" alt="image-20220820171438802" style="zoom: 80%;" />

## 2.`WXSS`支持的选择器

<img src="C:\Users\23634\AppData\Roaming\Typora\typora-user-images\image-20220820171514676.png" alt="image-20220820171514676" style="zoom: 80%;" />

## 3.`WXSS`优先级与`CSS`类似，权重如图

<img src="C:\Users\23634\AppData\Roaming\Typora\typora-user-images\image-20220820171553913.png" alt="image-20220820171553913" style="zoom: 67%;" />

## 4.`wxss`的扩展 – 尺寸单位

- 尺寸单位
  - `rpx`（responsive pixel）: 可以根据屏幕宽度进行自适应，规定屏幕宽为`750rpx`
  - 如在` iPhone6 `上，屏幕宽度为`375px`，共有`750`个物理像素，则`750rpx = 375px = 750物理像素`，`1rpx = 0.5px = 1物理像素`
- 建议：开发微信小程序时设计师可以用` iPhone6 `作为视觉稿的标准

<img src="C:\Users\23634\AppData\Roaming\Typora\typora-user-images\image-20220820171835089.png" alt="image-20220820171835089" style="zoom:67%;" />





# 二. `Mustache`语法绑定

---

- `WXML`基本格式：
  - 类似于`HTML`代码：比如可以写成单标签，也可以写成双标签
  - **必须有严格的闭合**：没有闭合会导致编译错误
  - **大小写敏感**：`class`和`Class`是不同的属性
- 开发中, 界面上展示的数据并不是写死的, 而是会根据服务器返回的数据，或者用户的操作来进行改变
  - 如果使用原生`JS`或者`jQuery`的话, 我们需要通过操作`DOM`来进行界面的更新
  - 小程序和`Vue`一样, 提供了插值语法: `Mustache`语法(双大括号)

<img src="C:\Users\23634\AppData\Roaming\Typora\typora-user-images\image-20220927233301813.png" alt="image-20220927233301813" style="zoom:80%;" />





# 三. `WXML`的条件渲染

---

## 1.逻辑判断`wx:if – wx:elif – wx:else`

- 某些时候, 我们需要根据条件来决定一些内容是否渲染： 
  - 当条件为`true`时, `view`组件会渲染出来
  - 当条件为`false`时, `view`组件不会渲染出来

<img src="C:\Users\23634\AppData\Roaming\Typora\typora-user-images\image-20220820193132675.png" alt="image-20220820193132675" style="zoom: 80%;" />

## 2.`hidden`属性

- `hidden`属性: 
  - `hidden`是所有的组件都默认拥有的属性
  - 当`hidden`属性为`true`时, 组件会被隐藏
  - 当`hidden`属性为`false`时, 组件会显示出来

![image-20220820193231376](C:\Users\23634\AppData\Roaming\Typora\typora-user-images\image-20220820193231376.png)

- `hidden`和`wx:if`的区别
  - `hidden`: 组件始终会被渲染，只是简单的控制显示与隐藏
  - `wx:if`: 控制组件是否渲染的





# 四. `WXML`的列表渲染

---

## 1.列表渲染 – `wx:for`基础

- 为什么使用`wx:for`？ 
  - 我们知道，在实际开发中，服务器经常返回各种列表数据，我们不可能一一从列表中取出数据进行展示
  - 需要通过`for`循环的方式，遍历所有的数据，一次性进行展示
- 在组件中，我们可以使用`wx:for`来遍历一个数组 （字符串 - 数字）
  - 默认情况下，遍历后在`wxml`中可以使用一个变量`index`，保存的是当前遍历数据的下标值
  - 数组中对应某项的数据，使用变量名`item`获取

![image-20220820193700859](C:\Users\23634\AppData\Roaming\Typora\typora-user-images\image-20220820193700859.png)

## 2.`block`标签

- 什么是`block`标签？
  - 某些情况下，我们需要使用`wx:if `或` wx:for`时，可能需要包裹一组组件标签
  - 我们希望对这一组组件标签进行整体的操作，这个时候怎么办呢？
- 注意：
  - `<block/> `并不是一个组件，它仅仅是一个包装元素，不会在页面中做任何渲染，只接受控制属性
- 使用`block`有两个好处：
  - 1）将需要进行遍历或者判断的内容进行包裹
  - 2）将遍历和判断的属性放在`block`便签中，不影响普通属性的阅读，提高代码的可读性

## 3.列表渲染 - `item/index`名称

- 默认情况下，`item – index`的名字是固定的
  - 但是某些情况下，我们可能想使用其他名称
  - 或者当出现多层遍历时，名字会重复
- 这个时候，我们可以指定`item`和`index`的名称：

![image-20220820194157502](C:\Users\23634\AppData\Roaming\Typora\typora-user-images\image-20220820194157502.png)

## 4.列表渲染 – `key`作用

- 我们看到，使用`wx:for`时，会报一个警告：
  - 这个提示告诉我们，可以添加一个`key`来提供性能
- 为什么需要这个`key`属性呢？
  - 这个其实和小程序内部也使用了虚拟`DOM`有关系（和`Vue`、`React`很相似）
  - 当某一层有很多相同的节点时，也就是列表节点时，我们希望插入、删除一个新的节点，可以更好的复用节点
- `wx:key `的值以两种形式提供
  - 字符串，代表在` for `循环的` array `中` item `的某个` property`，该` property `的值需要是列表中唯一的字符串或数字，且不能动态改变
  - 保留关键字` *this `代表在` for `循环中的` item `本身，这种表示需要` item `本身是一个唯一的字符串或者数字

![image-20220820194405103](C:\Users\23634\AppData\Roaming\Typora\typora-user-images\image-20220820194405103.png)





# 五. `WXS`语法基本使用

---

## 1.什么是`WXS`？

- `WXS（WeiXin Script）`是小程序的一套脚本语言，结合` WXML`，可以构建出页面的结构
  - 官方：`WXS `与` js`是不同的语言，有自己的语法，并不和` js`一致。（不过基本一致）
- 为什么要设计`WXS`语言呢？
  - **在`WXML`中是不能直接调用`Page/Component`中定义的函数的**(小程序的架构设计是双线程，如果通过微信原生客户端来作为中间桥梁负责`view`和`appService`之间的通信，会消耗更多的性能，所以**架构层面不这样设计，所以设计了一套`WXS`的方案**)
  - 但是某些情况, 我们可以希望使用函数来处理`WXML中`的数据(类似于`Vue`中的过滤器)，这个时候就使用`WXS`了
- `WXS`使用的限制和特点：
  - `WXS `不依赖于运行时的基础库版本，可以在所有版本的小程序中运行
  - `WXS `的运行环境和其他` js`代码是隔离的，`WXS `中不能调用其他` js`文件中定义的函数，也不能调用小程序提供的`API`
  - 由于运行环境的差异，在` iOS `设备上小程序内的` WXS `会比` js`代码快 2 ~ 20 倍。在` android `设备 上二者运行效率无差异

## 2.`WXS`的写法

- `WXS`有两种写法：
  - 写在`<wxs>`标签中
  - 写在以`.wxs`结尾的文件中

<img src="C:\Users\23634\AppData\Roaming\Typora\typora-user-images\image-20220820202430961.png" alt="image-20220820202430961" style="zoom:67%;" />

- `<wxs>`标签的属性：
  - 每一个` .wxs `文件和` <wxs> `标签都是一个单独的模块
  - 每个模块都有自己独立的作用域。即在一个模块里面定义的变量与函数，默认为私有的，对其他模块不可见
  - 一个模块要想对外暴露其内部的私有变量与函数，只能通过` module.exports `实现

## 3.`WXS`的练习

- 使用两种方式来计算一个数组的和：

![image-20220820202514899](C:\Users\23634\AppData\Roaming\Typora\typora-user-images\image-20220820202514899.png)

- 案例练习题目：
  - 题目一：传入一个数字，格式化后进行展示（例如36456，展示结果3.6万）
  - 题目二：传入一个事件，格式化后进行展示（例如100秒，展示结果为01:40）

![image-20220820202537463](C:\Users\23634\AppData\Roaming\Typora\typora-user-images\image-20220820202537463.png)













